{% extends 'base.html.twig' %}

{% block title %}Hello PrincipalController!{% endblock %}

{% block body %}

<center><h1><u>Affichage de l'historique</u></hi></center>

   


<h2>Voici la liste des demandes acceptées :</h2>
    Nombre des demandes dans l'historique : {{utilisations|length}}</br></br>
    <table class="table table-hover">
        <thead class="thead-dark">
            <tr>
                <th>Numéro de demande</th>
                <th>Date de demande</th>
                <th>Date de début</th>
                <th>Date de fin</th>
                <th>Etat</th>
                <th>commentaire</th>
                <th>Destination</th>
                <th>Véhicule</th>

            </tr>
        </thead>
        {% for utilisation in utilisations %}
        <thead class="thead-light">
            {% if utilisation.etat == 'En cours'%}
            <tr>
                <th>{{utilisation.id}}</th><th>{{utilisation.datedemande|date('Y-m-d')}}</th><th>{{utilisation.datedebut|date('Y-m-d')}}</th><th>{{utilisation.datefin|date('Y-m-d')}}</th>
                <th>{{utilisation.etat}}</th>
                {% if utilisation.commentaire == null %}
                    <th>Pas de commentaire</th>
                {% else %}
                    <th>{{utilisation.commentaire}}</th>
                {% endif %}
                {% if utilisation.getDestinationId() != null %}
                    <th>{{utilisation.getDestinationId().getDestination()}}</th>                   
                {% elseif utilisation.getDestinationId() == null %}
                    <th>Pas de destination</th>
                {% endif %}
                {% for vehicule in vehicules %}
                        {% if utilisation.getVehiculeId() == vehicule.id %}
                        <th>{{vehicule.immatriculation}}</th>
                        {% endif %}
                    {% endfor %}
                
            {% endif %}
        </thead>
        {% else %}
            Pas de demande trouvé.
        {% endfor %}
    
    </table>


{% endblock %}